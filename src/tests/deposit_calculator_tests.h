#ifndef TESTS_DEPOSIT_CALCULATOR_TESTS_H_
#define TESTS_DEPOSIT_CALCULATOR_TESTS_H_

#include <gtest/gtest.h>

#include <array>
#include <vector>

#include "deposit_calc.h"
#include "tests_misc.h"

using deposit_calculator_test_result_type =
    std::vector<std::pair<s21::model::Date, std::array<long double, 3>>>;

using deposit_calculator_test_case_type =
    std::pair<s21::model::DepositCalculator::Parameters,
              deposit_calculator_test_result_type>;

using deposit_calculator_test_case_storage_type =
    std::vector<deposit_calculator_test_case_type>;

inline const std::string PaymentListToString(
    const s21::model::DepositCalculator::payment_list& list);

inline const std::string ParamsMsg(
    const deposit_calculator_test_case_type& test_case);

inline const deposit_calculator_test_case_storage_type kAllTestCases{
    {// input
     {200'000.00,
      15,
      s21::model::TermType::kDays,
      s21::model::Date(1, 1, 2023),
      5.0,
      s21::model::RateType::kPerAnnum,
      s21::model::DepositCalculator::PeriodicityType::kDaily,
      false,
      {},
      {},
      0.0},
     // result
     {{{{1, 1, 2023}, {NAN, 200'000.00, 200'000.00}},
       {{2, 1, 2023}, {27.40, 0.00, 200'000.00}},
       {{3, 1, 2023}, {27.40, 0.00, 200'000.00}},
       {{4, 1, 2023}, {27.40, 0.00, 200'000.00}},
       {{5, 1, 2023}, {27.40, 0.00, 200'000.00}},
       {{6, 1, 2023}, {27.40, 0.00, 200'000.00}},
       {{7, 1, 2023}, {27.40, 0.00, 200'000.00}},
       {{8, 1, 2023}, {27.40, 0.00, 200'000.00}},
       {{9, 1, 2023}, {27.40, 0.00, 200'000.00}},
       {{10, 1, 2023}, {27.40, 0.00, 200'000.00}},
       {{11, 1, 2023}, {27.40, 0.00, 200'000.00}},
       {{12, 1, 2023}, {27.40, 0.00, 200'000.00}},
       {{13, 1, 2023}, {27.40, 0.00, 200'000.00}},
       {{14, 1, 2023}, {27.40, 0.00, 200'000.00}},
       {{15, 1, 2023}, {27.40, 0.00, 200'000.00}},
       {{16, 1, 2023}, {27.40, 0.00, 200'000.00}},
       {{16, 1, 2023}, {411.00, NAN, 200'000.00}}}}},
    // next test
    {// input
     {1'000'000.00,
      2,
      s21::model::TermType::kMonths,
      {31, 1, 2000},
      9.75,
      s21::model::RateType::kPerAnnum,
      s21::model::DepositCalculator::PeriodicityType::kWeekly,
      false,
      {},
      {},
      0.0},
     // result
     {{{{31, 1, 2000}, {NAN, 1'000'000.00, 1'000'000.00}},
       {{7, 2, 2000}, {1'864.75, 0.00, 1'000'000.00}},
       {{14, 2, 2000}, {1'864.75, 0.00, 1'000'000.00}},
       {{21, 2, 2000}, {1'864.75, 0.00, 1'000'000.00}},
       {{28, 2, 2000}, {1'864.75, 0.00, 1'000'000.00}},
       {{6, 3, 2000}, {1'864.75, 0.00, 1'000'000.00}},
       {{13, 3, 2000}, {1'864.75, 0.00, 1'000'000.00}},
       {{20, 3, 2000}, {1'864.75, 0.00, 1'000'000.00}},
       {{27, 3, 2000}, {1'864.75, 0.00, 1'000'000.00}},
       {{31, 3, 2000}, {1'065.57, 0.00, 1'000'000.00}},
       {{31, 3, 2000}, {15'983.58, NAN, 1'000'000.00}}}}},
    // next test
    {// input
     {4'000'000.00,
      25,
      s21::model::TermType::kMonths,
      {28, 2, 2004},
      1.0,
      s21::model::RateType::kPerMonth,
      s21::model::DepositCalculator::PeriodicityType::kMonthly,
      false,
      {},
      {},
      0.0},
     // result
     {{{{28, 2, 2004}, {NAN, 4'000'000.00, 4'000'000.00}},
       {{28, 3, 2004}, {38'032.79, 0.00, 4'000'000.00}},
       {{28, 4, 2004}, {40'655.74, 0.00, 4'000'000.00}},
       {{28, 5, 2004}, {39'344.26, 0.00, 4'000'000.00}},
       {{28, 6, 2004}, {40'655.74, 0.00, 4'000'000.00}},
       {{28, 7, 2004}, {39'344.26, 0.00, 4'000'000.00}},
       {{28, 8, 2004}, {40'655.74, 0.00, 4'000'000.00}},
       {{28, 9, 2004}, {40'655.74, 0.00, 4'000'000.00}},
       {{28, 10, 2004}, {39'344.26, 0.00, 4'000'000.00}},
       {{28, 11, 2004}, {40'655.74, 0.00, 4'000'000.00}},
       {{28, 12, 2004}, {39'344.26, 0.00, 4'000'000.00}},
       {{28, 1, 2005}, {40'756.34, 0.00, 4'000'000.00}},
       {{28, 2, 2005}, {40'767.12, 0.00, 4'000'000.00}},
       {{28, 3, 2005}, {36'821.92, 0.00, 4'000'000.00}},
       {{28, 4, 2005}, {40'767.12, 0.00, 4'000'000.00}},
       {{28, 5, 2005}, {39'452.05, 0.00, 4'000'000.00}},
       {{28, 6, 2005}, {40'767.12, 0.00, 4'000'000.00}},
       {{28, 7, 2005}, {39'452.05, 0.00, 4'000'000.00}},
       {{28, 8, 2005}, {40'767.12, 0.00, 4'000'000.00}},
       {{28, 9, 2005}, {40'767.12, 0.00, 4'000'000.00}},
       {{28, 10, 2005}, {39'452.05, 0.00, 4'000'000.00}},
       {{28, 11, 2005}, {40'767.12, 0.00, 4'000'000.00}},
       {{28, 12, 2005}, {39'452.05, 0.00, 4'000'000.00}},
       {{28, 1, 2006}, {40'767.12, 0.00, 4'000'000.00}},
       {{28, 2, 2006}, {40'767.12, 0.00, 4'000'000.00}},
       {{28, 3, 2006}, {36'821.92, 0.00, 4'000'000.00}},
       {{28, 3, 2006}, {997'033.87, NAN, 4'000'000.00}}}}},
    // next test
    {// input
     {1'350'000.00,
      281,
      s21::model::TermType::kDays,
      {17, 11, 2077},
      24.98,
      s21::model::RateType::kPerAnnum,
      s21::model::DepositCalculator::PeriodicityType::kPerQuarter,
      true,
      {},
      {},
      0.0},
     // result
     {{{{17, 11, 2077}, {NAN, 1'350'000.00, 1'350'000.00}},
       {{17, 2, 2078}, {85'000.44, 85'000.44, 1'435'000.44}},
       {{17, 5, 2078}, {87'406.07, 87'406.07, 1'522'406.51}},
       {{17, 8, 2078}, {95'855.72, 95'855.72, 1'618'262.23}},
       {{25, 8, 2078}, {8'860.10, 8'860.10, 1'627'122.33}},
       {{25, 8, 2078}, {277'122.33, NAN, 1'627'122.13}}}}},
    // next test
    {// input
     {1'935'000.00,
      10,
      s21::model::TermType::kYears,
      {20, 12, 2013},
      21.11,
      s21::model::RateType::kPerAnnum,
      s21::model::DepositCalculator::PeriodicityType::kPerHalfOfYear,
      true,
      {},
      {},
      0.0},
     // result
     {{{{20, 12, 2013}, {NAN, 1'935'000.00, 1'935'000.00}},
       {{20, 6, 2014}, {203'679.69, 203'679.69, 2'138'679.69}},
       {{20, 12, 2014}, {226'356.10, 226'356.10, 2'365'035.79}},
       {{20, 6, 2015}, {248'945.61, 248'945.61, 2'613'981.40}},
       {{20, 12, 2015}, {276'661.64, 276'661.64, 2'890'643.04}},
       {{20, 6, 2016}, {305'157.62, 305'157.62, 3'195'800.66}},
       {{20, 12, 2016}, {337'316.76, 337'316.76, 3'533'117.42}},
       {{20, 6, 2017}, {371'837.43, 371'837.43, 3'904'954.85}},
       {{20, 12, 2017}, {413'297.21, 413'297.21, 4'318'252.06}},
       {{20, 6, 2018}, {454'542.76, 454'542.76, 4'772'794.82}},
       {{20, 12, 2018}, {505'148.68, 505'148.68, 5'277'943.50}},
       {{20, 6, 2019}, {555'560.67, 555'560.67, 5'833'504.17}},
       {{20, 12, 2019}, {617'413.29, 617'413.29, 6'450'917.46}},
       {{20, 6, 2020}, {681'006.47, 681'006.47, 7'131'923.93}},
       {{20, 12, 2020}, {752'774.57, 752'774.57, 7'884'698.50}},
       {{20, 6, 2021}, {829'812.79, 829'812.79, 8'714'511.29}},
       {{20, 12, 2021}, {922'336.71, 922'336.71, 9'636'848.00}},
       {{20, 6, 2022}, {1'014'382.54, 1'014'382.54, 10'651'230.54}},
       {{20, 12, 2022}, {1'127'317.49, 1'127'317.49, 11'778'548.03}},
       {{20, 6, 2023}, {1'239'819.65, 1'239'819.65, 13'018'367.68}},
       {{20, 12, 2023}, {1'377'853.34, 1'377'853.34, 14'396'221.02}},
       {{20, 12, 2023}, {12'461'221.02, NAN, 14'396'221.02}}}}},
    // next test
    {// input
     {20'000'000.00,
      15,
      s21::model::TermType::kYears,
      {25, 9, 2001},
      4.66,
      s21::model::RateType::kPerAnnum,
      s21::model::DepositCalculator::PeriodicityType::kPerYear,
      true,
      {},
      {},
      0.0},
     // result
     {{{{25, 9, 2001}, {NAN, 20'000'000.00, 20'000'000.00}},
       {{25, 9, 2002}, {932'000.00, 932'000.00, 20'932'000.00}},
       {{25, 9, 2003}, {975'431.20, 975'431.20, 21'907'431.20}},
       {{25, 9, 2004}, {1'021'627.56, 1'021'627.56, 22'929'058.76}},
       {{25, 9, 2005}, {1'067'718.30, 1'067'718.30, 23'996'777.06}},
       {{25, 9, 2006}, {1'118'249.81, 1'118'249.81, 25'115'026.87}},
       {{25, 9, 2007}, {1'170'360.25, 1'170'360.25, 26'285'387.12}},
       {{25, 9, 2008}, {1'225'788.44, 1'225'788.44, 27'511'175.56}},
       {{25, 9, 2009}, {1'281'089.90, 1'281'089.90, 28'792'265.46}},
       {{25, 9, 2010}, {1'341'719.57, 1'341'719.57, 30'133'985.03}},
       {{25, 9, 2011}, {1'404'243.70, 1'404'243.70, 31'538'228.73}},
       {{25, 9, 2012}, {1'470'748.60, 1'470'748.60, 33'008'977.33}},
       {{25, 9, 2013}, {1'537'101.44, 1'537'101.44, 34'546'078.77}},
       {{25, 9, 2014}, {1'609'847.27, 1'609'847.27, 36'155'926.04}},
       {{25, 9, 2015}, {1'684'866.15, 1'684'866.15, 37'840'792.19}},
       {{25, 9, 2016}, {1'764'661.31, 1'764'661.31, 39'605'453.50}},
       {{25, 9, 2016}, {19'605'453.50, NAN, 39'605'453.50}}}}},
    // next test
    {// input
     {4'000'000.00,
      12,
      s21::model::TermType::kMonths,
      {1, 1, 2022},
      10.5,
      s21::model::RateType::kPerAnnum,
      s21::model::DepositCalculator::PeriodicityType::kMonthly,
      true,
      {{{1, 1, 2017}, 500'000.00},
       {{1, 2, 2022}, 50'000.00},
       {{27, 6, 2022}, 400'000.00},
       {{4, 4, 2022}, 170'000.00}},
      {{{4, 4, 2022}, -2'000'000.00},
       {{9, 9, 2022}, -20'000'000.00},
       {{22, 9, 2077}, -500'000.00}},
      500'000.00},
     // result
     {{{{1, 1, 2022}, {NAN, 4'000'000.00, 4'000'000.00}},
       {{1, 2, 2022}, {NAN, 50'000.00, 4'050'000.00}},
       {{1, 2, 2022}, {35'671.23, 35'671.23, 4'085'671.23}},
       {{1, 3, 2022}, {32'909.24, 32'909.24, 4'118'580.47}},
       {{1, 4, 2022}, {36'728.71, 36'728.71, 4'155'309.18}},
       {{4, 4, 2022}, {NAN, -1'830'000.00, 2'325'309.18}},
       {{1, 5, 2022}, {21'647.05, 21'647.05, 2'346'956.23}},
       {{1, 6, 2022}, {20'929.71, 20'929.71, 2'367'885.94}},
       {{27, 6, 2022}, {NAN, 400'000.00, 2'767'885.94}},
       {{1, 7, 2022}, {20'895.45, 20'895.45, 2'788'781.39}},
       {{1, 8, 2022}, {24'869.82, 24'869.82, 2'813'651.21}},
       {{1, 9, 2022}, {25'091.60, 25'091.60, 2'838'742.81}},
       {{1, 10, 2022}, {24'498.74, 24'498.74, 2'863'241.55}},
       {{1, 11, 2022}, {25'533.84, 25'533.84, 2'888'775.39}},
       {{1, 12, 2022}, {24'930.53, 24'930.53, 2'913'705.92}},
       {{1, 1, 2023}, {25'983.87, 25'983.87, 2'939'689.79}},
       {{1, 1, 2023}, {319'689.79, NAN, 2'939'689.79}}}}}};

inline void TestDepositOneCase(
    const deposit_calculator_test_case_type& test_case);

#endif  // TESTS_DEPOSIT_CALCULATOR_TESTS_H_